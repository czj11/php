<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>进度条</title>
	<script>
	function selfile(){
		var fd = new ForData();
		var pic = document.getElementsByTagName('input')[0].files[0];
		fd.append('pic',pic);
		var xhr = new XMLHttpRequest();
		xhr.open('POST','20.php','true');
		xhr.onreadystatechange = function(){
			if (this.readyState == 4) {

			}
		}
		xhr.upload.onprogress = function(ev){
			if (ev.lengthComputable) {
				var percent = 100*ev.loaded/ev.total;
				document.getElementById('bar').style.width= percent + '%';

			}
		}
		xhr.send(fd);

	}


	</script>
	<style>
	#progress{
		width:500px;
		height:30px;
		border:1px solid green;

	}
	#bar{
		width:0%;
		height:30px;
		background: green;
	}
	</style>
</head>
<body>
	<h1>文件上传</h1>
	<input type="file" name="pic" onchange="selfile();">
	<div id="progress">
	<div id="bar"></div>
	</div>

</body>
</html>